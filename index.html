<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jason She</title>
    <style>
        /* --- 1. 全局设置 --- */
        :root {
            --accent-color: #e09f3e; /* 金色主题 */
            --bg-color: #121212;     /* 深空灰黑 */
            --font-main: 'Helvetica Neue', Arial, sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: #eee;
            font-family: var(--font-main);
            overflow-x: hidden;
        }

        /* --- 2. 导航栏 --- */
        nav {
            position: fixed; top: 0; width: 100%; z-index: 1000;
            padding: 20px 40px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(18, 18, 18, 0.85); backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .logo { font-size: 1.5rem; font-weight: bold; letter-spacing: 2px; color: var(--accent-color); }
        .nav-links { display: flex; gap: 20px; }
        .nav-links a { text-decoration: none; color: #fff; transition: 0.3s; }
        .nav-links a:hover { color: var(--accent-color); }

        /* --- 3. 首页 (Hero) --- */
        header {
            height: 100vh; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            position: relative;
        }
        .hero-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('images/cover.jpg'); /* 请确保有这张图 */
            background-size: cover; background-position: center;
            filter: brightness(0.5); z-index: -1;
        }
        header h1 { font-size: 4rem; margin-bottom: 1rem; letter-spacing: 3px; text-transform: uppercase; }

        /* --- 4. Cover Flow 核心样式 --- */
        #photojournal {
            height: 90vh; 
            display: flex; flex-direction: column; justify-content: center;
            position: relative;
            background: linear-gradient(to bottom, #121212 0%, #1a1a1a 100%);
            overflow: hidden;
        }

        .pj-header {
            text-align: center; margin-bottom: 20px; position: absolute; top: 40px; width: 100%; z-index: 20;
        }
        .pj-title { font-size: 2rem; letter-spacing: 5px; text-transform: uppercase; }
        .pj-date { 
            color: var(--accent-color); font-size: 1.2rem; font-weight: bold; 
            border: 1px solid var(--accent-color); padding: 5px 15px; border-radius: 20px;
            display: inline-block; margin-top: 10px;
        }

        .coverflow-scene {
            position: relative; width: 100%; height: 500px;
            perspective: 1000px; display: flex; justify-content: center; align-items: center;
        }

        .cf-card {
            position: absolute; height: 400px; width: auto;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            -webkit-box-reflect: below 0px linear-gradient(transparent, transparent, rgba(0,0,0,0.3));
        }

        .cf-card img {
            height: 100%; width: auto; border-radius: 4px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); object-fit: contain; background-color: #000;
        }

        .cf-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; opacity: 0; transition: opacity 0.5s; pointer-events: none;
        }

        .cf-controls {
            position: absolute; bottom: 40px; width: 100%; text-align: center; z-index: 20;
        }
        .btn-control {
            background: transparent; border: 1px solid #555; color: #fff;
            padding: 10px 40px; border-radius: 30px; margin: 0 10px; cursor: pointer; transition: 0.3s;
        }
        .btn-control:hover { border-color: var(--accent-color); color: var(--accent-color); }

        /* --- 5. Projects 样式 --- */
        #projects { padding: 100px 5%; }
        
        .project-item { 
            display: flex; 
            gap: 60px;       
            margin-bottom: 120px; 
            align-items: center; 
        }

        .p-img { 
            flex: 1; 
            height: 350px;   
            background-size: cover; 
            background-position: center;
            border-radius: 8px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .p-info { flex: 1; }

        .p-info h3 {
            font-size: 4.5rem;    
            font-weight: 800;     
            line-height: 1.1;     
            margin-bottom: 25px;  
            letter-spacing: -1px; 
            color: #fff;          
            text-transform: uppercase; 
        }

        .p-info p {
            font-size: 1.4rem;    
            color: #ccc;          
            line-height: 1.6;     
            max-width: 90%;       
        }

        /* --- 6. 二级显示 (Lightbox) 及其新增样式 --- */
        .lightbox-modal {
            display: none; position: fixed; z-index: 9999; top: 0; left: 0;
            width: 100%; height: 100%; background: rgba(0,0,0,0.95);
            justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s;
        }
        .lightbox-modal.active { display: flex; opacity: 1; }
        .lightbox-content { max-width: 90%; max-height: 90vh; border: 2px solid var(--accent-color); }
        
        /* 优化关闭按钮层级与动画 */
        .close-btn { position: absolute; top: 30px; right: 40px; color: #fff; font-size: 50px; cursor: pointer; z-index: 10000; transition: 0.3s; }
        .close-btn:hover { color: var(--accent-color); }

        /* 新增：Lightbox 左右导航按钮样式 */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.6);
            font-size: 60px;
            font-weight: bold;
            cursor: pointer;
            padding: 20px;
            user-select: none;
            transition: color 0.3s ease;
            z-index: 10000;
        }
        .nav-btn:hover {
            color: var(--accent-color);
        }
        .prev-btn { left: 5%; }
        .next-btn { right: 5%; }
    </style>
</head>
<body>

    <nav>
        <div class="logo">Jason She</div>
        <div class="nav-links">
            <a href="#home">Home</a>
            <a href="#photojournal">Photo Journal</a>
            <a href="#projects">Projects</a>
        </div>
    </nav>

    <header id="home">
        <div class="hero-bg"></div>
        <h1>FRAGMENTS OF LIGHT</h1>
        <p>2026 Portfolio</p>
    </header>

    <!-- Cover Flow 区域 -->
    <section id="photojournal">
        <div class="pj-header">
            <h2 class="pj-title">Photo Journal</h2>
            <span class="pj-date">Feb 2008</span>
        </div>

        <div class="coverflow-scene" id="scene">
            <!-- Index 0 -->
            <div class="cf-card" onclick="clickCard(0)">
                <div class="cf-overlay"></div>
                <img src="images/1.jpg" alt="img1">
            </div>
            <!-- Index 1 (C位) -->
            <div class="cf-card" onclick="clickCard(1)">
                <div class="cf-overlay"></div>
                <img src="images/2.jpg" alt="img2">
            </div>
            <!-- Index 2 -->
            <div class="cf-card" onclick="clickCard(2)">
                <div class="cf-overlay"></div>
                <img src="images/3.jpg" alt="img3">
            </div>
            <!-- Index 3 -->
            <div class="cf-card" onclick="clickCard(3)">
                <div class="cf-overlay"></div>
                <img src="images/4.jpg" alt="img4">
            </div>
            <!-- Index 4 -->
            <div class="cf-card" onclick="clickCard(4)">
                <div class="cf-overlay"></div>
                <img src="images/5.jpg" alt="img5">
            </div>
            <!-- Index 5 -->
            <div class="cf-card" onclick="clickCard(5)">
                <div class="cf-overlay"></div>
                <img src="images/6.jpg" alt="img6">
            </div>
        </div>

        <div class="cf-controls">
            <button class="btn-control" onclick="shiftFlow(-1)">Prev</button>
            <button class="btn-control" onclick="shiftFlow(1)">Next</button>
        </div>
    </section>

    <!-- Projects 区域 -->
    <section id="projects">
        <div class="project-item">
            <!-- 图片区域 -->
            <div class="p-img" style="background-image: url('images/p1.jpg');"></div>
            <!-- 文字区域 -->
            <div class="p-info">
                <h3>Urban Soul</h3>
                <p>Capturing the silent moments in a busy city.</p>
            </div>
        </div>

        <div class="project-item" style="flex-direction: row-reverse;">
            <!-- 图片区域 -->
            <div class="p-img" style="background-image: url('images/p2.jpg');"></div>
            <!-- 文字区域 -->
            <div class="p-info">
                <h3>Neon Nights</h3>
                <p>Exploring the color palette of midnight streets.</p>
            </div>
        </div>
    </section>

    <!-- 二级显示弹窗 (更新：加入了左右切换按钮及防误触机制) -->
    <div id="lightbox" class="lightbox-modal" onclick="closeLightbox()">
        <span class="close-btn">&times;</span>
        
        <!-- 左右切换按钮 -->
        <span class="nav-btn prev-btn" onclick="navigateLightbox(event, -1)">&#10094;</span>
        <span class="nav-btn next-btn" onclick="navigateLightbox(event, 1)">&#10095;</span>
        
        <!-- 阻止事件冒泡，防止点到图片中间意外关闭 -->
        <img class="lightbox-content" id="lightbox-img" onclick="event.stopPropagation()">
    </div>

    <script>
        // --- Cover Flow 逻辑 ---
        const cards = document.querySelectorAll('.cf-card');
        let activeIndex = 1; 

        function updateCoverFlow() {
            cards.forEach((card, index) => {
                card.style.zIndex = "";
                card.style.opacity = "";
                
                const overlay = card.querySelector('.cf-overlay');
                overlay.style.opacity = 0; 

                const offset = index - activeIndex;

                if (index === activeIndex) {
                    card.style.transform = `translateX(0) translateZ(200px) rotateY(0deg)`;
                    card.style.zIndex = 100;
                    card.style.filter = "brightness(1.1)";
                } 
                else if (index < activeIndex) {
                    card.style.transform = `translateX(${offset * 220}px) translateZ(-200px) rotateY(60deg)`;
                    card.style.zIndex = 10 + index; 
                    overlay.style.opacity = 0.4;
                } 
                else {
                    card.style.transform = `translateX(${offset * 220}px) translateZ(-200px) rotateY(-60deg)`;
                    card.style.zIndex = 10 + (cards.length - index); 
                    overlay.style.opacity = 0.4;
                }
            });
        }

        updateCoverFlow();

        function shiftFlow(dir) {
            const newIndex = activeIndex + dir;
            if (newIndex >= 0 && newIndex < cards.length) {
                activeIndex = newIndex;
                updateCoverFlow();
            }
        }

        function clickCard(index) {
            if (index === activeIndex) {
                // 修改：传入对应的图片索引
                openLightbox(index);
            } else {
                activeIndex = index;
                updateCoverFlow();
            }
        }

        // --- 二级显示 (Lightbox) 逻辑更新 ---
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');
        let currentLightboxIndex = 0; // 记录当前展示的图片序号

        function openLightbox(index) {
            currentLightboxIndex = index;
            // 【修复点 1】：加上了 准确定位图片
            lightboxImg.src = cards.querySelector('img').src;
            lightbox.classList.add('active');
        }

        function closeLightbox() {
            lightbox.classList.remove('active');
        }

        // --- 沉浸模式下的左右切换 ---
        function navigateLightbox(event, direction) {
            // 阻止事件冒泡，防止点击按钮时触发外层的 closeLightbox()
            if (event) event.stopPropagation(); 

            currentLightboxIndex += direction;

            // 循环切换逻辑：到最前或最后实现无缝循环
            if (currentLightboxIndex < 0) {
                currentLightboxIndex = cards.length - 1;
            } else if (currentLightboxIndex >= cards.length) {
                currentLightboxIndex = 0;
            }

            // 【修复点 2】：加上了 准确定位下一张图片
            lightboxImg.src = cards.querySelector('img').src;
        }

        // --- 支持键盘快捷键 (方向键左右切换、ESC退出) ---
        document.addEventListener('keydown', function(event) {
            if (lightbox.classList.contains('active')) {
                if (event.key === 'ArrowLeft') {
                    navigateLightbox(null, -1);
                } else if (event.key === 'ArrowRight') {
                    navigateLightbox(null, 1);
                } else if (event.key === 'Escape') {
                    closeLightbox();
                }
            }
        });
    </script>
</body>
</html>F